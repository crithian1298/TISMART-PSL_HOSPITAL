--------------------------------------------------------
-- Archivo creado  - sábado-agosto-03-2024   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Table CONDICION
--------------------------------------------------------

  CREATE TABLE "BD_HOSPITALES"."CONDICION" 
   (	"IDCONDICION" NUMBER, 
	"DESCCONDICION" VARCHAR2(100 BYTE), 
	"FECHAREGISTRO" TIMESTAMP (6)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table DISTRITO
--------------------------------------------------------

  CREATE TABLE "BD_HOSPITALES"."DISTRITO" 
   (	"IDDISTRITO" NUMBER, 
	"IDPROVINCIA" NUMBER, 
	"DESCSEDE" VARCHAR2(100 BYTE), 
	"FECHAREGISTRO" TIMESTAMP (6)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table GERENTE
--------------------------------------------------------

  CREATE TABLE "BD_HOSPITALES"."GERENTE" 
   (	"IDGERENTE" NUMBER, 
	"DESCGERENTE" VARCHAR2(100 BYTE), 
	"FECHAREGISTRO" TIMESTAMP (6)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table HOSPITAL
--------------------------------------------------------

  CREATE TABLE "BD_HOSPITALES"."HOSPITAL" 
   (	"IDHOSPITAL" NUMBER, 
	"IDDISTRITO" NUMBER, 
	"NOMBRE" VARCHAR2(100 BYTE), 
	"ANTIGUEDAD" NUMBER, 
	"AREA" NUMBER(5,2), 
	"IDSEDE" NUMBER, 
	"IDGERENTE" NUMBER, 
	"IDCONDICION" NUMBER, 
	"FECHAREGISTRO" TIMESTAMP (6)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table PROVINCIA
--------------------------------------------------------

  CREATE TABLE "BD_HOSPITALES"."PROVINCIA" 
   (	"IDPROVINCIA" NUMBER, 
	"DESCPROVINCIA" VARCHAR2(100 BYTE), 
	"FECHAREGISTRO" TIMESTAMP (6)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table SEDE
--------------------------------------------------------

  CREATE TABLE "BD_HOSPITALES"."SEDE" 
   (	"IDSEDE" NUMBER, 
	"DESCSEDE" VARCHAR2(100 BYTE), 
	"FECHAREGISTRO" TIMESTAMP (6)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 
 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
REM INSERTING into BD_HOSPITALES.CONDICION
SET DEFINE OFF;
Insert into BD_HOSPITALES.CONDICION (IDCONDICION,DESCCONDICION,FECHAREGISTRO) values ('1','En funcionamiento',to_timestamp('01/08/25 09:10:00,000000000 AM','DD/MM/RR HH12:MI:SSXFF AM'));
Insert into BD_HOSPITALES.CONDICION (IDCONDICION,DESCCONDICION,FECHAREGISTRO) values ('2','En renovación',to_timestamp('01/08/24 08:10:00,000000000 AM','DD/MM/RR HH12:MI:SSXFF AM'));
REM INSERTING into BD_HOSPITALES.DISTRITO
SET DEFINE OFF;
Insert into BD_HOSPITALES.DISTRITO (IDDISTRITO,IDPROVINCIA,DESCSEDE,FECHAREGISTRO) values ('1','1','Distrito 1',to_timestamp('15/03/14 07:45:00,000000000 AM','DD/MM/RR HH12:MI:SSXFF AM'));
Insert into BD_HOSPITALES.DISTRITO (IDDISTRITO,IDPROVINCIA,DESCSEDE,FECHAREGISTRO) values ('2','2','Distrito 2',to_timestamp('08/02/13 09:24:00,000000000 AM','DD/MM/RR HH12:MI:SSXFF AM'));
REM INSERTING into BD_HOSPITALES.GERENTE
SET DEFINE OFF;
Insert into BD_HOSPITALES.GERENTE (IDGERENTE,DESCGERENTE,FECHAREGISTRO) values ('1','Juan Pérez',to_timestamp('01/08/24 10:30:00,000000000 AM','DD/MM/RR HH12:MI:SSXFF AM'));
Insert into BD_HOSPITALES.GERENTE (IDGERENTE,DESCGERENTE,FECHAREGISTRO) values ('2','Ana Martínez',to_timestamp('12/06/23 09:50:00,000000000 AM','DD/MM/RR HH12:MI:SSXFF AM'));
REM INSERTING into BD_HOSPITALES.HOSPITAL
SET DEFINE OFF;
Insert into BD_HOSPITALES.HOSPITAL (IDHOSPITAL,IDDISTRITO,NOMBRE,ANTIGUEDAD,AREA,IDSEDE,IDGERENTE,IDCONDICION,FECHAREGISTRO) values ('1','1','Hospital Central','10','5','1','1','1',to_timestamp('02/08/24 12:41:41,951000000 PM','DD/MM/RR HH12:MI:SSXFF AM'));
Insert into BD_HOSPITALES.HOSPITAL (IDHOSPITAL,IDDISTRITO,NOMBRE,ANTIGUEDAD,AREA,IDSEDE,IDGERENTE,IDCONDICION,FECHAREGISTRO) values ('2','2','Hospital Norte','5','3','2','2','2',to_timestamp('02/08/24 12:41:41,956000000 PM','DD/MM/RR HH12:MI:SSXFF AM'));
Insert into BD_HOSPITALES.HOSPITAL (IDHOSPITAL,IDDISTRITO,NOMBRE,ANTIGUEDAD,AREA,IDSEDE,IDGERENTE,IDCONDICION,FECHAREGISTRO) values ('3','1','Hospital Central','10','1','1','1','1',to_timestamp('02/08/24 02:19:25,017000000 PM','DD/MM/RR HH12:MI:SSXFF AM'));
Insert into BD_HOSPITALES.HOSPITAL (IDHOSPITAL,IDDISTRITO,NOMBRE,ANTIGUEDAD,AREA,IDSEDE,IDGERENTE,IDCONDICION,FECHAREGISTRO) values ('4','1','Hospital Central','4','1','1','1','1',to_timestamp('02/08/24 02:36:33,214000000 PM','DD/MM/RR HH12:MI:SSXFF AM'));
Insert into BD_HOSPITALES.HOSPITAL (IDHOSPITAL,IDDISTRITO,NOMBRE,ANTIGUEDAD,AREA,IDSEDE,IDGERENTE,IDCONDICION,FECHAREGISTRO) values ('5','1','Hospital Central','4','1','1','1','1',to_timestamp('02/08/24 02:36:51,245000000 PM','DD/MM/RR HH12:MI:SSXFF AM'));
Insert into BD_HOSPITALES.HOSPITAL (IDHOSPITAL,IDDISTRITO,NOMBRE,ANTIGUEDAD,AREA,IDSEDE,IDGERENTE,IDCONDICION,FECHAREGISTRO) values ('6','1','Hospital Central','4','1','1','1','1',to_timestamp('02/08/24 02:37:33,766000000 PM','DD/MM/RR HH12:MI:SSXFF AM'));
Insert into BD_HOSPITALES.HOSPITAL (IDHOSPITAL,IDDISTRITO,NOMBRE,ANTIGUEDAD,AREA,IDSEDE,IDGERENTE,IDCONDICION,FECHAREGISTRO) values ('7','2','Hospital Norte','5','3,4','2','2','2',to_timestamp('02/08/24 02:43:31,433000000 PM','DD/MM/RR HH12:MI:SSXFF AM'));
Insert into BD_HOSPITALES.HOSPITAL (IDHOSPITAL,IDDISTRITO,NOMBRE,ANTIGUEDAD,AREA,IDSEDE,IDGERENTE,IDCONDICION,FECHAREGISTRO) values ('8','1','Hospital Central','4','15','1','1','1',to_timestamp('02/08/24 02:43:41,651000000 PM','DD/MM/RR HH12:MI:SSXFF AM'));
Insert into BD_HOSPITALES.HOSPITAL (IDHOSPITAL,IDDISTRITO,NOMBRE,ANTIGUEDAD,AREA,IDSEDE,IDGERENTE,IDCONDICION,FECHAREGISTRO) values ('9','1','Hospital Central','10','4','1','1','1',to_timestamp('02/08/24 02:50:17,526000000 PM','DD/MM/RR HH12:MI:SSXFF AM'));
Insert into BD_HOSPITALES.HOSPITAL (IDHOSPITAL,IDDISTRITO,NOMBRE,ANTIGUEDAD,AREA,IDSEDE,IDGERENTE,IDCONDICION,FECHAREGISTRO) values ('10','1','Hospital central','10','8,2','1','1','1',to_timestamp('02/08/24 08:49:12,186000000 PM','DD/MM/RR HH12:MI:SSXFF AM'));
REM INSERTING into BD_HOSPITALES.PROVINCIA
SET DEFINE OFF;
Insert into BD_HOSPITALES.PROVINCIA (IDPROVINCIA,DESCPROVINCIA,FECHAREGISTRO) values ('1','Lima',to_timestamp('02/08/24 12:37:28,244000000 PM','DD/MM/RR HH12:MI:SSXFF AM'));
Insert into BD_HOSPITALES.PROVINCIA (IDPROVINCIA,DESCPROVINCIA,FECHAREGISTRO) values ('2','Piura',to_timestamp('02/08/24 12:37:28,251000000 PM','DD/MM/RR HH12:MI:SSXFF AM'));
Insert into BD_HOSPITALES.PROVINCIA (IDPROVINCIA,DESCPROVINCIA,FECHAREGISTRO) values ('3','Cañete',to_timestamp('02/08/24 12:39:29,020000000 PM','DD/MM/RR HH12:MI:SSXFF AM'));
REM INSERTING into BD_HOSPITALES.SEDE
SET DEFINE OFF;
Insert into BD_HOSPITALES.SEDE (IDSEDE,DESCSEDE,FECHAREGISTRO) values ('1','Sede Central',to_timestamp('24/08/21 08:20:00,000000000 AM','DD/MM/RR HH12:MI:SSXFF AM'));
Insert into BD_HOSPITALES.SEDE (IDSEDE,DESCSEDE,FECHAREGISTRO) values ('2','Sede Norte',to_timestamp('17/06/20 09:40:00,000000000 AM','DD/MM/RR HH12:MI:SSXFF AM'));
Insert into BD_HOSPITALES.SEDE (IDSEDE,DESCSEDE,FECHAREGISTRO) values ('3','Sede Sur',to_timestamp('13/02/19 07:30:00,000000000 AM','DD/MM/RR HH12:MI:SSXFF AM'));
--------------------------------------------------------
--  DDL for Index SYS_C008389
--------------------------------------------------------

  CREATE UNIQUE INDEX "BD_HOSPITALES"."SYS_C008389" ON "BD_HOSPITALES"."GERENTE" ("IDGERENTE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C008390
--------------------------------------------------------

  CREATE UNIQUE INDEX "BD_HOSPITALES"."SYS_C008390" ON "BD_HOSPITALES"."CONDICION" ("IDCONDICION") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C008391
--------------------------------------------------------

  CREATE UNIQUE INDEX "BD_HOSPITALES"."SYS_C008391" ON "BD_HOSPITALES"."SEDE" ("IDSEDE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C008392
--------------------------------------------------------

  CREATE UNIQUE INDEX "BD_HOSPITALES"."SYS_C008392" ON "BD_HOSPITALES"."PROVINCIA" ("IDPROVINCIA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C008393
--------------------------------------------------------

  CREATE UNIQUE INDEX "BD_HOSPITALES"."SYS_C008393" ON "BD_HOSPITALES"."DISTRITO" ("IDDISTRITO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C008395
--------------------------------------------------------

  CREATE UNIQUE INDEX "BD_HOSPITALES"."SYS_C008395" ON "BD_HOSPITALES"."HOSPITAL" ("IDHOSPITAL") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C008390
--------------------------------------------------------

  CREATE UNIQUE INDEX "BD_HOSPITALES"."SYS_C008390" ON "BD_HOSPITALES"."CONDICION" ("IDCONDICION") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C008393
--------------------------------------------------------

  CREATE UNIQUE INDEX "BD_HOSPITALES"."SYS_C008393" ON "BD_HOSPITALES"."DISTRITO" ("IDDISTRITO") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C008389
--------------------------------------------------------

  CREATE UNIQUE INDEX "BD_HOSPITALES"."SYS_C008389" ON "BD_HOSPITALES"."GERENTE" ("IDGERENTE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C008395
--------------------------------------------------------

  CREATE UNIQUE INDEX "BD_HOSPITALES"."SYS_C008395" ON "BD_HOSPITALES"."HOSPITAL" ("IDHOSPITAL") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C008392
--------------------------------------------------------

  CREATE UNIQUE INDEX "BD_HOSPITALES"."SYS_C008392" ON "BD_HOSPITALES"."PROVINCIA" ("IDPROVINCIA") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Index SYS_C008391
--------------------------------------------------------

  CREATE UNIQUE INDEX "BD_HOSPITALES"."SYS_C008391" ON "BD_HOSPITALES"."SEDE" ("IDSEDE") 
  PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Procedure SP_HOSPITAL_ACTUALIZAR
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "BD_HOSPITALES"."SP_HOSPITAL_ACTUALIZAR" (
    p_idHospital IN Hospital.idHospital%TYPE,
    p_idDistrito IN Hospital.idDistrito%TYPE,
    p_Nombre IN Hospital.Nombre%TYPE,
    p_Antiguedad IN Hospital.Antiguedad%TYPE,
    p_Area IN Hospital.Area%TYPE,
    p_idSede IN Hospital.idSede%TYPE,
    p_idGerente IN Hospital.idGerente%TYPE,
    p_idCondicion IN Hospital.idCondicion%TYPE,
    p_fechaRegistro IN Hospital.FechaRegistro%TYPE  
) IS
BEGIN
    UPDATE Hospital
    SET 
         idDistrito=p_idDistrito,
         Nombre = p_Nombre,
         Antiguedad = p_Antiguedad,
         Area = p_Area,
         idSede = p_idSede,
         idGerente = p_idGerente,
         idCondicion = p_idCondicion,
         FechaRegistro = p_fechaRegistro
    WHERE idHospital = p_idHospital;
    --UTILIZANDO ESTRUCTURA DE DATOS PARA ACTUALIZAR ----
    IF SQL%ROWCOUNT = 0 THEN
        RAISE_APPLICATION_ERROR(-20001, 'Error: No se encontró el empleado con ID ' || p_idHospital);
    ELSE 
          DBMS_OUTPUT.PUT_LINE(' El registro con el id '|| p_idHospital ||' se actualizo con exito ');
    END IF;

EXCEPTION
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE('Error: ' || SQLERRM);
END;

/
--------------------------------------------------------
--  DDL for Procedure SP_HOSPITAL_ELIMINAR
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "BD_HOSPITALES"."SP_HOSPITAL_ELIMINAR" (
     p_idHospital IN Hospital.idHospital%TYPE
) IS
BEGIN
    DELETE FROM Hospital
    WHERE idHospital = p_idHospital;
     IF SQL%ROWCOUNT = 0 THEN
        RAISE_APPLICATION_ERROR(-20001, 'Error: No se encontró el empleado con ID ' || p_idHospital);
         ELSE 
          DBMS_OUTPUT.PUT_LINE(' El registro ha sido eliminado con exito ');
    END IF;
EXCEPTION
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE('Error: ' || SQLERRM);
END;

/
--------------------------------------------------------
--  DDL for Procedure SP_HOSPITAL_REGISTRAR
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "BD_HOSPITALES"."SP_HOSPITAL_REGISTRAR" (
    p_idHospital IN Hospital.idHospital%TYPE,
    p_idDistrito IN Hospital.idDistrito%TYPE,
    p_Nombre IN Hospital.Nombre%TYPE,
    p_Antiguedad IN Hospital.Antiguedad%TYPE,
    p_Area IN Hospital.Area%TYPE,
    p_idSede IN Hospital.idSede%TYPE,
    p_idGerente IN Hospital.idGerente%TYPE,
    p_idCondicion IN Hospital.idCondicion%TYPE,
    p_fechaRegistro IN Hospital.FechaRegistro%TYPE  
) IS
BEGIN
    INSERT INTO Hospital(idHospital, idDistrito, Nombre, Antiguedad, Area, idSede, idGerente, idCondicion, fechaRegistro)
    VALUES (p_idHospital, p_idDistrito, p_Nombre, p_Antiguedad, p_Area, p_idSede, p_idGerente, p_idCondicion, p_fechaRegistro);

EXCEPTION
    WHEN DUP_VAL_ON_INDEX THEN
        DBMS_OUTPUT.PUT_LINE('Error: El Hospital con ID ' || p_idHospital || ' ya existe.');
    WHEN OTHERS THEN
        DBMS_OUTPUT.PUT_LINE('Error: ' || SQLERRM);
END;

/
--------------------------------------------------------
--  DDL for Procedure SP_LISTA_HOSPITALES
--------------------------------------------------------
set define off;

  CREATE OR REPLACE NONEDITIONABLE PROCEDURE "BD_HOSPITALES"."SP_LISTA_HOSPITALES" AS
BEGIN
    FOR rec IN (SELECT idHospital, idDistrito, Nombre, Antiguedad, Area, idSede, idGerente, idCondicion, FechaRegistro
                FROM Hospital
                ORDER BY idHospital) LOOP
        DBMS_OUTPUT.PUT_LINE('idHospital: ' || rec.idHospital || 
                             ', idDistrito: ' || rec.idDistrito || 
                             ', Nombre: ' || rec.Nombre || 
                             ', Antiguedad: ' || rec.Antiguedad || 
                             ', Area: ' || rec.Area || 
                             ', idSede: ' || rec.idSede || 
                             ', idGerente: ' || rec.idGerente || 
                             ', idCondicion: ' || rec.idCondicion || 
                             ', FechaRegistro: ' || rec.FechaRegistro);
    END LOOP;
END SP_LISTA_HOSPITALES;

/
--------------------------------------------------------
--  Constraints for Table CONDICION
--------------------------------------------------------

  ALTER TABLE "BD_HOSPITALES"."CONDICION" ADD PRIMARY KEY ("IDCONDICION")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table DISTRITO
--------------------------------------------------------

  ALTER TABLE "BD_HOSPITALES"."DISTRITO" ADD PRIMARY KEY ("IDDISTRITO")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table GERENTE
--------------------------------------------------------

  ALTER TABLE "BD_HOSPITALES"."GERENTE" ADD PRIMARY KEY ("IDGERENTE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table HOSPITAL
--------------------------------------------------------

  ALTER TABLE "BD_HOSPITALES"."HOSPITAL" ADD PRIMARY KEY ("IDHOSPITAL")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table PROVINCIA
--------------------------------------------------------

  ALTER TABLE "BD_HOSPITALES"."PROVINCIA" ADD PRIMARY KEY ("IDPROVINCIA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table SEDE
--------------------------------------------------------

  ALTER TABLE "BD_HOSPITALES"."SEDE" ADD PRIMARY KEY ("IDSEDE")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1
  BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table DISTRITO
--------------------------------------------------------

  ALTER TABLE "BD_HOSPITALES"."DISTRITO" ADD CONSTRAINT "IDPROVINCIA" FOREIGN KEY ("IDPROVINCIA")
	  REFERENCES "BD_HOSPITALES"."PROVINCIA" ("IDPROVINCIA") ON DELETE CASCADE ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table HOSPITAL
--------------------------------------------------------

  ALTER TABLE "BD_HOSPITALES"."HOSPITAL" ADD CONSTRAINT "IDDISTRITO" FOREIGN KEY ("IDDISTRITO")
	  REFERENCES "BD_HOSPITALES"."DISTRITO" ("IDDISTRITO") ON DELETE CASCADE ENABLE;
  ALTER TABLE "BD_HOSPITALES"."HOSPITAL" ADD CONSTRAINT "IDSEDE" FOREIGN KEY ("IDSEDE")
	  REFERENCES "BD_HOSPITALES"."SEDE" ("IDSEDE") ON DELETE CASCADE ENABLE;
  ALTER TABLE "BD_HOSPITALES"."HOSPITAL" ADD CONSTRAINT "IDGERENTE" FOREIGN KEY ("IDGERENTE")
	  REFERENCES "BD_HOSPITALES"."GERENTE" ("IDGERENTE") ON DELETE CASCADE ENABLE;
  ALTER TABLE "BD_HOSPITALES"."HOSPITAL" ADD CONSTRAINT "IDCONDICION" FOREIGN KEY ("IDCONDICION")
	  REFERENCES "BD_HOSPITALES"."CONDICION" ("IDCONDICION") ON DELETE CASCADE ENABLE;
